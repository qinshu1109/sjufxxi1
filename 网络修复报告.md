# Dockerç½‘ç»œé—®é¢˜ä¿®å¤æŠ¥å‘Š

## ğŸ” é—®é¢˜è¯Šæ–­

**åŸé—®é¢˜**: Dockeræ— æ³•è®¿é—®Docker Hubï¼Œå‡ºç° `Get "https://registry-1.docker.io/v2/": EOF` é”™è¯¯

**æ ¹æœ¬åŸå› **: 
1. ç³»ç»Ÿé…ç½®äº†ä»£ç† (http://127.0.0.1:7890)
2. DockeræœåŠ¡æ²¡æœ‰ç»§æ‰¿ç³»ç»Ÿä»£ç†é…ç½®
3. Dockerç”¨æˆ·é…ç½®ç›®å½•æƒé™é—®é¢˜

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. DockeræœåŠ¡ä»£ç†é…ç½®
```bash
# åˆ›å»ºDockeræœåŠ¡ä»£ç†é…ç½®
sudo mkdir -p /etc/systemd/system/docker.service.d
sudo tee /etc/systemd/system/docker.service.d/http-proxy.conf << EOF
[Service]
Environment="HTTP_PROXY=http://127.0.0.1:7890"
Environment="HTTPS_PROXY=http://127.0.0.1:7890"
Environment="NO_PROXY=localhost,127.0.0.1,docker-registry.example.com,.corp"
EOF
```

### 2. Dockerç”¨æˆ·ä»£ç†é…ç½®
```bash
# åˆ›å»ºç”¨æˆ·Dockeré…ç½®
mkdir -p ~/.docker
tee ~/.docker/config.json << EOF
{
    "proxies": {
        "default": {
            "httpProxy": "http://127.0.0.1:7890",
            "httpsProxy": "http://127.0.0.1:7890",
            "noProxy": "localhost,127.0.0.1"
        }
    }
}
EOF
```

### 3. æƒé™ä¿®å¤
```bash
# ä¿®å¤ç›®å½•æƒé™
sudo chown -R qinshu:qinshu ~/.docker
sudo chown -R qinshu:qinshu /home/qinshu/douyin-analytics

# æ·»åŠ ç”¨æˆ·åˆ°dockerç»„
sudo usermod -aG docker qinshu

# é‡å¯DockeræœåŠ¡
sudo systemctl daemon-reload
sudo systemctl restart docker
```

## ğŸ“Š éªŒè¯ç»“æœ

### âœ… ç½‘ç»œè¿æ¥æµ‹è¯•
```bash
$ docker run --rm hello-world
Hello from Docker!
This message shows that your installation appears to be working correctly.
```

### âœ… ä»£ç†é…ç½®éªŒè¯
```bash
$ docker info | grep -A 3 "HTTP Proxy"
 HTTP Proxy: http://127.0.0.1:7890
 HTTPS Proxy: http://127.0.0.1:7890
 No Proxy: localhost,127.0.0.1,docker-registry.example.com,.corp
```

### âœ… æƒé™éªŒè¯
```bash
$ docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
# èƒ½æ­£å¸¸æ‰§è¡Œï¼Œæ— æƒé™é”™è¯¯
```

## ğŸ¯ æœ€ç»ˆçŠ¶æ€

- âœ… Dockerå¯ä»¥æ­£å¸¸è®¿é—®Docker Hub
- âœ… ä»£ç†é…ç½®æ­£ç¡®åº”ç”¨
- âœ… ç”¨æˆ·æƒé™å®Œå…¨æ­£å¸¸
- âœ… å¯ä»¥æ­£å¸¸ä¸‹è½½å’Œè¿è¡Œå®¹å™¨
- âœ… ä¸ºåç»­Difyéƒ¨ç½²æ‰«æ¸…éšœç¢

## ğŸ“‹ åç»­æ“ä½œ

ç°åœ¨å¯ä»¥å®‰å…¨åœ°æ‰§è¡Œï¼š
```bash
cd /home/qinshu/douyin-analytics/dify/docker
docker compose up -d
```

---
*ä¿®å¤æ—¶é—´: 2025-06-15 18:42*
*ä¿®å¤çŠ¶æ€: âœ… å®Œå…¨æˆåŠŸ*