# Dockeré…ç½®åŸºçº¿åˆ†ææŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: 2025-06-16  
**åˆ†æèŒƒå›´**: sjufxxié¡¹ç›®ç°æœ‰Dockeré…ç½®  
**åˆ†æç›®çš„**: ä¸ºPodmanè¿ç§»æä¾›åŸºçº¿æ•°æ®

## ğŸ“‹ æœåŠ¡æ¶æ„æ¦‚è§ˆ

### æ ¸å¿ƒæœåŠ¡ç»„ä»¶
| æœåŠ¡å | é•œåƒ | ç«¯å£ | åŠŸèƒ½ | è¿ç§»å¤æ‚åº¦ |
|--------|------|------|------|------------|
| api | langgenius/dify-api:1.4.2 | 5001 | Dify APIæœåŠ¡ | ä¸­ç­‰ |
| worker | langgenius/dify-api:1.4.2 | - | Celeryå·¥ä½œè¿›ç¨‹ | ä¸­ç­‰ |
| web | langgenius/dify-web:1.4.2 | 3000 | å‰ç«¯ç•Œé¢ | ä½ |
| db | postgres:15-alpine | 5432 | PostgreSQLæ•°æ®åº“ | ä½ |
| redis | redis:6-alpine | 6379 | ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ— | ä½ |
| nginx | nginx:latest | 80/443 | åå‘ä»£ç† | ä½ |
| weaviate | semitechnologies/weaviate:1.25.5 | 8080 | å‘é‡æ•°æ®åº“ | ä¸­ç­‰ |
| sandbox | langgenius/dify-sandbox:0.2.10 | 8194 | ä»£ç æ‰§è¡Œæ²™ç®± | é«˜ |

### å¯é€‰æœåŠ¡ç»„ä»¶
| æœåŠ¡å | é•œåƒ | ç”¨é€” | è¿ç§»ç­–ç•¥ |
|--------|------|------|----------|
| qdrant | qdrant/qdrant:v1.7.4 | å‘é‡å­˜å‚¨ | æŒ‰éœ€è¿ç§» |
| opensearch | opensearchproject/opensearch:2.13.0 | æœç´¢å¼•æ“ | æŒ‰éœ€è¿ç§» |
| elasticsearch | docker.elastic.co/elasticsearch/elasticsearch:8.14.3 | æœç´¢å¼•æ“ | æŒ‰éœ€è¿ç§» |
| milvus | milvusdb/milvus:v2.4.5 | å‘é‡æ•°æ®åº“ | æŒ‰éœ€è¿ç§» |

## ğŸ”§ é…ç½®å¤æ‚åº¦åˆ†æ

### ç¯å¢ƒå˜é‡ç»Ÿè®¡
- **æ€»ç¯å¢ƒå˜é‡æ•°**: 500+
- **æ•°æ®åº“ç›¸å…³**: 50+
- **å‘é‡å­˜å‚¨ç›¸å…³**: 100+
- **å®‰å…¨ç›¸å…³**: 30+
- **æ’ä»¶ç›¸å…³**: 80+

### ç½‘ç»œé…ç½®
```yaml
networks:
  ssrf_proxy_network:
    driver: bridge
    internal: true
  milvus:
    driver: bridge
  opensearch-net:
    driver: bridge
    internal: true
```

### å­˜å‚¨å·é…ç½®
```yaml
volumes:
  - ./volumes/app/storage:/app/api/storage
  - ./volumes/db/data:/var/lib/postgresql/data
  - ./volumes/redis/data:/data
  - ./volumes/weaviate:/var/lib/weaviate
```

## âš ï¸ è¿ç§»é£é™©è¯„ä¼°

### é«˜é£é™©é¡¹
1. **å¤æ‚çš„ç¯å¢ƒå˜é‡ä¾èµ–**: 500+å˜é‡éœ€è¦é€ä¸€éªŒè¯
2. **å¤šå‘é‡æ•°æ®åº“æ”¯æŒ**: éœ€è¦ç¡®ä¿Podmanç½‘ç»œå…¼å®¹æ€§
3. **æ’ä»¶ç³»ç»Ÿ**: plugin_daemonæœåŠ¡çš„rootlesså…¼å®¹æ€§
4. **SSRFä»£ç†**: å†…éƒ¨ç½‘ç»œéš”ç¦»åœ¨Podmanä¸­çš„å®ç°

### ä¸­é£é™©é¡¹
1. **å¥åº·æ£€æŸ¥**: éœ€è¦é€‚é…Podmançš„å¥åº·æ£€æŸ¥æœºåˆ¶
2. **æ–‡ä»¶æƒé™**: rootlessæ¨¡å¼ä¸‹çš„æƒé™æ˜ å°„
3. **æœåŠ¡ä¾èµ–**: depends_onåœ¨podman-composeä¸­çš„æ”¯æŒ

### ä½é£é™©é¡¹
1. **åŸºç¡€æœåŠ¡**: PostgreSQLã€Redisã€Nginxæ ‡å‡†é…ç½®
2. **ç«¯å£æ˜ å°„**: æ ‡å‡†ç«¯å£æ˜ å°„æ— å…¼å®¹æ€§é—®é¢˜

## ğŸ¯ Podmanè¿ç§»ç­–ç•¥

### Phase 1: æ ¸å¿ƒæœåŠ¡è¿ç§»
- api, worker, web, db, redis, nginx
- ä¿æŒæœ€å°åŠŸèƒ½é›†ï¼Œç¡®ä¿åŸºæœ¬å¯ç”¨æ€§

### Phase 2: å‘é‡å­˜å‚¨è¿ç§»
- weaviateä½œä¸ºé»˜è®¤å‘é‡å­˜å‚¨
- å…¶ä»–å‘é‡æ•°æ®åº“æŒ‰éœ€é…ç½®

### Phase 3: é«˜çº§åŠŸèƒ½è¿ç§»
- sandboxä»£ç æ‰§è¡Œç¯å¢ƒ
- æ’ä»¶ç³»ç»Ÿå’Œmarketplace

## ğŸ“Š èµ„æºéœ€æ±‚è¯„ä¼°

### å†…å­˜éœ€æ±‚
- **æœ€å°é…ç½®**: 8GB RAM
- **æ¨èé…ç½®**: 16GB RAM
- **ç”Ÿäº§é…ç½®**: 32GB RAM

### å­˜å‚¨éœ€æ±‚
- **é…ç½®æ–‡ä»¶**: <100MB
- **åº”ç”¨æ•°æ®**: 1-10GB
- **å‘é‡æ•°æ®**: æ ¹æ®ä½¿ç”¨é‡åŠ¨æ€å¢é•¿

### CPUéœ€æ±‚
- **æœ€å°é…ç½®**: 4æ ¸
- **æ¨èé…ç½®**: 8æ ¸
- **ç”Ÿäº§é…ç½®**: 16æ ¸

## âœ… éªŒæ”¶æ ‡å‡†

1. **åŠŸèƒ½å®Œæ•´æ€§**: æ‰€æœ‰æ ¸å¿ƒæœåŠ¡æ­£å¸¸å¯åŠ¨
2. **ç½‘ç»œè¿é€šæ€§**: æœåŠ¡é—´é€šä¿¡æ­£å¸¸
3. **æ•°æ®æŒä¹…æ€§**: æ•°æ®å·æ­£ç¡®æŒ‚è½½
4. **æ€§èƒ½åŸºå‡†**: å“åº”æ—¶é—´ä¸è¶…è¿‡Dockerç‰ˆæœ¬15%
5. **å®‰å…¨åˆè§„**: rootlessæ¨¡å¼æ­£å¸¸è¿è¡Œ

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. åˆ›å»ºPodmanå…¼å®¹çš„composeæ–‡ä»¶
2. é…ç½®rootlessç”¨æˆ·å‘½åç©ºé—´
3. æµ‹è¯•æ ¸å¿ƒæœåŠ¡å¯åŠ¨
4. éªŒè¯æœåŠ¡é—´é€šä¿¡
5. æ€§èƒ½åŸºå‡†æµ‹è¯•
